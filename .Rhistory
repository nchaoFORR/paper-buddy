library(tidyverse)
raw_vectors <- read_lines('../../word-embeddings/fastext-wikipedia/wiki-news-300d-1M.vec',
skip = 1, progress = TRUE, n_max = 1000000)
raw_vectors[1]
vec = raw_vectors[[1]]
tibble(word = str_detect(vec, ".* "))
tibble(word = str_extract(vec, ".* "))
tibble(word = str_extract(vec, ".*(?= )"))
tibble(word = str_split(vec, " "))[1]
tibble(word = str_split(vec, " "))
vec
str_split(vec, " ")
str_split(vec, " ")[2]
str_split(vec, " ")[1]
str_split(vec, " ")[1][1]
str_split(vec, " ")[[1]]
str_split(vec, " ")[[1]][1]
tibble(word = str_split(vec, " ")[[1]][1])
tibble(word = temp_vec[1],
vec = temp_vec[2:301] %>% str_c(collapse = " "))
temp_vec <- str_split(vec, " ")[[1]]
tibble(word = temp_vec[1],
vec = temp_vec[2:301] %>% str_c(collapse = " "))
final_df <- map_dfr(raw_vectors, function(vec){
# vec = raw_vectors[[1]]
temp_vec <- str_split(vec, " ")[[1]]
tibble(word = temp_vec[1],
vec = temp_vec[2:301] %>% str_c(collapse = " "))
})
vec
str_extract(vec, "[^ ]{1:50}(?= )")
str_extract(vec, "[^ ]{1,50}(?= )")
str_extract(vec, "(?=.* ).*")
str_extract(vec, "(?=[^ ]*  ).*")
str_extract(vec, "(?=[^ ]* ).*")
str_extract(vec, "(?=[^ ] ).*")
str_extract(vec, "(?<=[^ ] ).*")
tibble(word = str_extract(vec, "[^ ]{1,50}(?= )"),
vec = str_extract(vec, "(?<=[^ ] ).*"))
final_df <- map_dfr(raw_vectors, function(vec){
# vec = raw_vectors[[1]]
tibble(word = str_extract(vec, "[^ ]{1,50}(?= )"),
vec = str_extract(vec, "(?<=[^ ] ).*"))
})
# check longest length of word
i <- 1
final_df <- map_dfr(raw_vectors, function(vec){
# vec = raw_vectors[[1]]
message(i)
i <- i + 1
tibble(word = str_extract(vec, "[^ ]{1,50}(?= )"),
vec = str_extract(vec, "(?<=[^ ] ).*"))
})
# check longest length of word
i <- 1
final_df <- map_dfr(raw_vectors, function(vec){
# vec = raw_vectors[[1]]
message(i)
i <<- i + 1
tibble(word = str_extract(vec, "[^ ]{1,50}(?= )"),
vec = str_extract(vec, "(?<=[^ ] ).*"))
})
final_df[1:10, ]
write_rds(final_df, "data/word-embeddings/fastext-wiki-pretrained.rds")
write_csv(final_df, "data/word-embeddings/fastext-wiki-pretrained.csv")
